<?xml version="1.0" encoding="utf-8"?>
<DataSchemaModel FileFormatVersion="1.2" SchemaVersion="2.9" DspName="Microsoft.Data.Tools.Schema.Sql.Sql130DatabaseSchemaProvider" CollationLcid="1033" CollationCaseSensitive="False" xmlns="http://schemas.microsoft.com/sqlserver/dac/Serialization/2012/02">
	<Header>
		<CustomData Category="AnsiNulls">
			<Metadata Name="AnsiNulls" Value="True" />
		</CustomData>
		<CustomData Category="QuotedIdentifier">
			<Metadata Name="QuotedIdentifier" Value="True" />
		</CustomData>
		<CustomData Category="CompatibilityMode">
			<Metadata Name="CompatibilityMode" Value="130" />
		</CustomData>
		<CustomData Category="Reference" Type="Assembly">
			<Metadata Name="LogicalName" Value="Retail.Telegram.Bot.Database.dll" />
			<Metadata Name="FileName" Value="C:\WORK\RETAILTELEGRAMBOT\DEV\RETAIL.TELEGRAM.BOT.DATABASE\OBJ\DEBUG\RETAIL.TELEGRAM.BOT.DATABASE.DLL" />
			<Metadata Name="AssemblyName" Value="Retail.Telegram.Bot.Database" />
			<Metadata Name="PermissionSet" Value="SAFE" />
			<Metadata Name="Owner" Value="" />
			<Metadata Name="GenerateSqlClrDdl" Value="True" />
			<Metadata Name="IsVisible" Value="True" />
			<Metadata Name="IsModelAware" Value="True" />
			<Metadata Name="SkipCreationIfEmpty" Value="True" />
			<Metadata Name="AssemblySymbolsName" Value="C:\Work\RetailTelegramBot\Dev\Retail.Telegram.Bot.Database\obj\Debug\Retail.Telegram.Bot.Database.pdb" />
		</CustomData>
		<CustomData Category="SqlCmdVariables" Type="SqlCmdVariable" />
	</Header>
	<Model>
		<Element Type="SqlDatabaseOptions">
			<Property Name="Collation" Value="SQL_Latin1_General_CP1_CI_AS" />
			<Property Name="IsAnsiNullDefaultOn" Value="True" />
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Property Name="IsAnsiWarningsOn" Value="True" />
			<Property Name="IsArithAbortOn" Value="True" />
			<Property Name="IsConcatNullYieldsNullOn" Value="True" />
			<Property Name="IsTornPageProtectionOn" Value="False" />
			<Property Name="IsFullTextEnabled" Value="True" />
			<Property Name="PageVerifyMode" Value="3" />
			<Property Name="DefaultLanguage" Value="" />
			<Property Name="DefaultFullTextLanguage" Value="" />
			<Property Name="QueryStoreStaleQueryThreshold" Value="367" />
			<Relationship Name="DefaultFilegroup">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[PRIMARY]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlSchema" Name="[bot]">
			<Relationship Name="Authorizer">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[dbo]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[bot].[DF_Error_CreatedOn]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[bot].[Error]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[bot].[Error].[CreatedOn]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[bot].[DF_Error_ModifiedOn]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[bot].[Error]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[bot].[Error].[ModifiedOn]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[bot].[DF_Product_CreatedOn]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[bot].[Product]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[bot].[Product].[CreatedOn]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[bot].[DF_Product_ModifiedOn]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[bot].[Product]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[bot].[Product].[ModifiedOn]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[bot].[DF_Refusal_CreatedOn]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[bot].[Refusal]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[bot].[Refusal].[CreatedOn]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[bot].[DF_Refusal_ModifiedOn]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[bot].[Refusal]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[bot].[Refusal].[ModifiedOn]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[bot].[DF_RefusalType_HasComment]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[bot].[RefusalType]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[bot].[RefusalType].[HasComment]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[bot].[DF_RefusalType_Order]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((0))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[bot].[RefusalType]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[bot].[RefusalType].[Order]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[bot].[DF_RefusalWorkflowStatus_CreateOn]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus].[CreateOn]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[bot].[DF_RefusalWorkflowStatus_ModifiedOn]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus].[ModifiedOn]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[bot].[DF_Store_CreatedOn]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[bot].[Store]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[bot].[Store].[CreatedOn]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[bot].[DF_Store_ModifiedOn]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[bot].[Store]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[bot].[Store].[ModifiedOn]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[bot].[DF_User_CreatedOn]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[bot].[User]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[bot].[User].[CreatedOn]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[bot].[DF_User_ModifiedOn]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[(getdate())]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[bot].[User]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[bot].[User].[ModifiedOn]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlDefaultConstraint" Name="[bot].[DF_User_Status]">
			<Property Name="DefaultExpressionScript">
				<Value><![CDATA[((1))]]></Value>
			</Property>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[bot].[User]" />
				</Entry>
			</Relationship>
			<Relationship Name="ForColumn">
				<Entry>
					<References Name="[bot].[User].[Status]" />
				</Entry>
			</Relationship>
		</Element>
		<Element Type="SqlTable" Name="[bot].[Error]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[Error].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[Error].[ChatId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[Error].[RefusalWorkflowStatusId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[Error].[ErrorCode]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[Error].[ErrorMessage]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[Error].[StackTrace]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[Error].[CreatedOn]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[Error].[ModifiedOn]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[bot]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="3" />
		</Element>
		<Element Type="SqlProcedure" Name="[bot].[Error_AddEdit]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

    IF EXISTS(SELECT 1 FROM [bot].[Error] WHERE ChatId = @ChatId and (ErrorCode = @ErrorCode or ErrorMessage = @ErrorMessage))
	BEGIN

	-- Update if exists
	   UPDATE [bot].[Error]
	   SET StackTrace = @StackTrace
		  ,ModifiedOn = getdate()
	   WHERE ChatId = @ChatId and (ErrorCode = @ErrorCode or ErrorMessage = @ErrorMessage)

	END
    ELSE
    BEGIN

		-- Create a new record
		INSERT INTO [bot].[Error]
           ([ChatId]
           ,[RefusalWorkflowStatusId]
           ,[ErrorCode]
           ,[ErrorMessage]
           ,[StackTrace]
           ,[CreatedOn]
           ,[ModifiedOn])
     VALUES
           (@ChatId
           ,@RefusalWorkflowStatusId
           ,@ErrorCode
           ,@ErrorMessage
           ,@StackTrace
           ,ISNULL(@CreatedOn, GETDATE())
		   ,ISNULL(@ModifiedOn, GETDATE()))

	END
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[bot].[Error]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Error].[ChatId]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Error_AddEdit].[@ChatId]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Error].[ErrorCode]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Error_AddEdit].[@ErrorCode]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Error].[ErrorMessage]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Error_AddEdit].[@ErrorMessage]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Error].[StackTrace]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Error_AddEdit].[@StackTrace]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Error].[ModifiedOn]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Error].[ChatId]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Error].[ErrorCode]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Error].[ErrorMessage]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Error].[RefusalWorkflowStatusId]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Error].[CreatedOn]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Error_AddEdit].[@RefusalWorkflowStatusId]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Error_AddEdit].[@CreatedOn]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Error_AddEdit].[@ModifiedOn]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[Error_AddEdit].[@Id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[Error_AddEdit].[@ChatId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[Error_AddEdit].[@RefusalWorkflowStatusId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[Error_AddEdit].[@ErrorCode]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[Error_AddEdit].[@ErrorMessage]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[Error_AddEdit].[@StackTrace]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="IsMax" Value="True" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[Error_AddEdit].[@CreatedOn]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[Error_AddEdit].[@ModifiedOn]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[bot]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1198" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [bot].[Error_AddEdit]&#xD;&#xA;&#x9;&#x9;   @Id int = null&#xD;&#xA;&#x9;&#x9;  ,@ChatId bigint = null&#xD;&#xA;&#x9;&#x9;  ,@RefusalWorkflowStatusId int = null&#xD;&#xA;&#x9;&#x9;  ,@ErrorCode bigint = null&#xD;&#xA;&#x9;&#x9;  ,@ErrorMessage nvarchar(1024) = null&#xD;&#xA;&#x9;&#x9;  ,@StackTrace nvarchar(max) = null&#xD;&#xA;&#x9;&#x9;  ,@CreatedOn datetime = null&#xD;&#xA;&#x9;&#x9;  ,@ModifiedOn datetime = null&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[bot].[PK_Error]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[bot].[Error].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[bot].[Error]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="3" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[bot].[PK_Product]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[bot].[Product].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[bot].[Product]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="4" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[bot].[PK_Refusal]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[bot].[Refusal].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[bot].[Refusal]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="5" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[bot].[PK_RefusalType]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[bot].[RefusalType].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[bot].[RefusalType]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="6" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[bot].[PK_RefusalWorkflowStatus]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[bot].[RefusalWorkflowStatus].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="7" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[bot].[PK_Store]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[bot].[Store].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[bot].[Store]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="8" />
		</Element>
		<Element Type="SqlPrimaryKeyConstraint" Name="[bot].[PK_User]">
			<Relationship Name="ColumnSpecifications">
				<Entry>
					<Element Type="SqlIndexedColumnSpecification">
						<Relationship Name="Column">
							<Entry>
								<References Name="[bot].[User].[Id]" />
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="DefiningTable">
				<Entry>
					<References Name="[bot].[User]" />
				</Entry>
			</Relationship>
			<Annotation Type="SqlInlineConstraintAnnotation" Disambiguator="9" />
		</Element>
		<Element Type="SqlTable" Name="[bot].[Product]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[Product].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[Product].[ProductBarcode]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="255" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[Product].[CreatedOn]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[Product].[ModifiedOn]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[bot]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="4" />
		</Element>
		<Element Type="SqlProcedure" Name="[bot].[Product_AddEdit]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	
    IF NOT EXISTS(SELECT 1 FROM [bot].[Product] WHERE ProductBarcode = @ProductBarcode)
	BEGIN

		-- Create new
	
		INSERT INTO [bot].[Product]
			   ([ProductBarcode]
			   ,[CreatedOn]
			   ,[ModifiedOn])
		 VALUES
			   (@ProductBarcode
			   ,ISNULL(@CreatedOn, GETDATE())
			   ,ISNULL(@ModifiedOn, GETDATE()))

		SELECT CAST(scope_identity() AS int);
    END
	ELSE
	BEGIN

		SELECT top(1) Id FROM [bot].[Product] WHERE ProductBarcode = @ProductBarcode

	END
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[bot].[Product]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Product].[ProductBarcode]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Product_AddEdit].[@ProductBarcode]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Product].[ProductBarcode]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Product].[CreatedOn]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Product].[ModifiedOn]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Product_AddEdit].[@CreatedOn]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Product_AddEdit].[@ModifiedOn]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Product].[Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[Product_AddEdit].[@Id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[Product_AddEdit].[@ProductBarcode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="255" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[Product_AddEdit].[@CreatedOn]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[Product_AddEdit].[@ModifiedOn]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[bot]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="682" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [bot].[Product_AddEdit]&#x9;&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;   @Id int = null&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;  ,@ProductBarcode nvarchar(255)&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;  ,@CreatedOn datetime = null&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;  ,@ModifiedOn datetime = null&#x9;&#x9;&#x9;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[bot].[Product_Get]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

   SET @Xml = (SELECT (SELECT  p.[Id]
							  ,p.[ProductBarcode]
							  ,p.[CreatedOn]
							  ,p.[ModifiedOn]
						FROM [bot].[Product] AS p
						WHERE p.Id = @Id
						FOR XML RAW('Product'), TYPE)
				FOR XML PATH('Products'),TYPE)

END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[bot].[Product_Get].[@Xml]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Product]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Product].[Id]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Product].[ProductBarcode]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Product].[CreatedOn]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Product].[ModifiedOn]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Product_Get].[@Id]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[Product_Get].[@Id]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[Product_Get].[@Xml]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlXmlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[xml]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[bot]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="363" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [bot].[Product_Get]&#xD;&#xA;&#x9;&#x9;&#x9;  @Id int&#xD;&#xA;&#x9;&#x9;    , @Xml XML output&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[bot].[Refusal]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[Refusal].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[Refusal].[RefusalTypeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[Refusal].[RefusalComment]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[Refusal].[UserId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[Refusal].[ProductId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[Refusal].[StoreId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[Refusal].[CreatedOn]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[Refusal].[ModifiedOn]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[bot]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="5" />
		</Element>
		<Element Type="SqlProcedure" Name="[bot].[Refusal_AddEdit]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN	

	DECLARE @StoreId int = 0;
	SELECT @StoreId = StoreId from [bot].[User] WHERE Id = @UserId;

	--DECLARE @RefusalId int = 0;
	--SET @RefusalId = (SELECT top(1) Id FROM [bot].[Refusal] WHERE ProductId = @ProductId and UserId = @UserId and RefusalTypeId=@RefusalTypeId ORDER BY ModifiedOn DESC);

	--IF @RefusalId<>0 and @RefusalComment IS NOT NULL AND @RefusalComment<>''
	--BEGIN
	
	--   -- Update if exists
	--   UPDATE [bot].[Refusal]
	--   SET RefusalComment = @RefusalComment
	--      ,ModifiedOn = getdate()
	--   WHERE Id = @RefusalId

	--   SELECT @RefusalId

	--END
 --   ELSE
 --   BEGIN
		-- Create new
		INSERT INTO [bot].[Refusal]
           ([RefusalTypeId]
           ,[RefusalComment]
           ,[UserId]
           ,[ProductId]
           ,[StoreId]
           ,[CreatedOn]
           ,[ModifiedOn])
		VALUES
           (@RefusalTypeId
           ,@RefusalComment
           ,@UserId
           ,@ProductId
           ,@StoreId
           ,ISNULL(@CreatedOn, GETDATE())
           ,ISNULL(@ModifiedOn, GETDATE()))

		   SELECT CAST(scope_identity() AS int);
	--END
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[bot].[User]" />
				</Entry>
				<Entry>
					<References Name="[bot].[User].[StoreId]" />
				</Entry>
				<Entry>
					<References Name="[bot].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Refusal_AddEdit].[@UserId]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Refusal]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Refusal].[RefusalTypeId]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Refusal].[RefusalComment]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Refusal].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Refusal].[ProductId]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Refusal].[StoreId]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Refusal].[CreatedOn]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Refusal].[ModifiedOn]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Refusal_AddEdit].[@RefusalTypeId]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Refusal_AddEdit].[@RefusalComment]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Refusal_AddEdit].[@ProductId]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Refusal_AddEdit].[@CreatedOn]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Refusal_AddEdit].[@ModifiedOn]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[Refusal_AddEdit].[@Id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[Refusal_AddEdit].[@RefusalTypeId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[Refusal_AddEdit].[@RefusalComment]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="1024" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[Refusal_AddEdit].[@UserId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[Refusal_AddEdit].[@ProductId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[Refusal_AddEdit].[@CreatedOn]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[Refusal_AddEdit].[@ModifiedOn]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[bot]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1394" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [bot].[Refusal_AddEdit]&#x9;&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;   @Id int = null&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;  ,@RefusalTypeId int&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;  ,@RefusalComment nvarchar(1024) = null&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;  ,@UserId int&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;  ,@ProductId int&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;  ,@CreatedOn datetime = null&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;  ,@ModifiedOn datetime = null&#x9;&#x9;&#x9;&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[bot].[RefusalType]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[RefusalType].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[RefusalType].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="255" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[RefusalType].[Order]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[RefusalType].[HasComment]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[bot]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="6" />
		</Element>
		<Element Type="SqlProcedure" Name="[bot].[RefusalType_List]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

	SET @Xml = (SELECT (SELECT rt.[Id]
							  ,rt.[Name]
							  ,rt.[Order]
							  ,rt.[HasComment]
						FROM [bot].[RefusalType] AS rt
						ORDER BY rt.[Order] ASC
					FOR XML RAW('RefusalType'), TYPE)
				FOR XML PATH('RefusalTypes'),TYPE)
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[bot].[RefusalType_List].[@Xml]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalType]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalType].[Id]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalType].[Name]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalType].[Order]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalType].[HasComment]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[RefusalType_List].[@Xml]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlXmlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[xml]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[bot]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="355" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [bot].[RefusalType_List]&#xD;&#xA;&#x9;&#x9;&#x9;&#x9; @Xml XML output&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[bot].[RefusalWorkflowStatus]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[RefusalWorkflowStatus].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[RefusalWorkflowStatus].[ChatId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[RefusalWorkflowStatus].[ProcessStage]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[RefusalWorkflowStatus].[UserId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[RefusalWorkflowStatus].[ProductId]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[RefusalWorkflowStatus].[CreateOn]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[RefusalWorkflowStatus].[ModifiedOn]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[bot]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="7" />
		</Element>
		<Element Type="SqlProcedure" Name="[bot].[RefusalWorkflowStatus_AddEdit]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

    IF EXISTS(SELECT 1 FROM [bot].[RefusalWorkflowStatus] WHERE ChatId = @ChatId)
	BEGIN

	-- Update if exists
	   UPDATE [bot].[RefusalWorkflowStatus]
	   SET ProcessStage = @ProcessStage
		  ,UserId = @UserId
	      ,ProductId = @ProductId
		  ,ModifiedOn = getdate()
	   WHERE ChatId = @ChatId

	   SELECT top(1) Id FROM [bot].[RefusalWorkflowStatus] WHERE ChatId = @ChatId

	END
    ELSE
    BEGIN

		-- Create a new record
		INSERT INTO [bot].[RefusalWorkflowStatus]
			   ([ChatId]
			   ,[ProcessStage]
			   ,[UserId]
			   ,[ProductId]
			   ,[CreateOn]
			   ,[ModifiedOn])
		 VALUES
			   (@ChatId
			   ,@ProcessStage
			   ,@UserId
			   ,@ProductId
			   ,ISNULL(@CreatedOn, GETDATE())
			   ,ISNULL(@ModifiedOn, GETDATE()))

		SELECT CAST(scope_identity() AS int);
	END
END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus].[ChatId]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus_AddEdit].[@ChatId]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus].[ProcessStage]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus_AddEdit].[@ProcessStage]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus_AddEdit].[@UserId]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus].[ProductId]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus_AddEdit].[@ProductId]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus].[ModifiedOn]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus].[ChatId]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus].[Id]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus].[CreateOn]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus_AddEdit].[@CreatedOn]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus_AddEdit].[@ModifiedOn]" />
				</Entry>
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[RefusalWorkflowStatus_AddEdit].[@Id]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[RefusalWorkflowStatus_AddEdit].[@ChatId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[RefusalWorkflowStatus_AddEdit].[@ProcessStage]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[RefusalWorkflowStatus_AddEdit].[@UserId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[RefusalWorkflowStatus_AddEdit].[@ProductId]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[RefusalWorkflowStatus_AddEdit].[@CreatedOn]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[RefusalWorkflowStatus_AddEdit].[@ModifiedOn]">
						<Property Name="DefaultExpressionScript">
							<Value><![CDATA[null]]></Value>
						</Property>
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[bot]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1110" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [bot].[RefusalWorkflowStatus_AddEdit]&#xD;&#xA;&#x9;&#x9;   @Id int = null&#xD;&#xA;&#x9;&#x9;  ,@ChatId bigint = null&#xD;&#xA;&#x9;&#x9;  ,@ProcessStage int = null&#xD;&#xA;&#x9;&#x9;  ,@UserId int = null&#xD;&#xA;&#x9;&#x9;  ,@ProductId int = null&#xD;&#xA;&#x9;&#x9;  ,@CreatedOn datetime = null&#xD;&#xA;&#x9;&#x9;  ,@ModifiedOn datetime = null&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[bot].[RefusalWorkflowStatus_Delete]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
   SET NOCOUNT ON;

   DELETE FROM [bot].[RefusalWorkflowStatus]
      WHERE ChatId=@ChatId

END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus].[ChatId]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus_Delete].[@ChatId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[RefusalWorkflowStatus_Delete].[@ChatId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[bot]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="188" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [bot].[RefusalWorkflowStatus_Delete]&#xD;&#xA;&#x9;&#x9;&#x9;  @ChatId bigint&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlProcedure" Name="[bot].[RefusalWorkflowStatus_Get]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;

   SET @Xml = (SELECT (SELECT   rws.[Id]
							  , rws.[ChatId]
							  , rws.[ProcessStage]
							  , rws.[UserId]
							  , rws.[ProductId]
							  , rws.[CreateOn]
							  , rws.[ModifiedOn]
						FROM [bot].[RefusalWorkflowStatus] AS rws
						WHERE rws.ChatId = @ChatId
						ORDER BY rws.[ModifiedOn] desc
						FOR XML RAW('RefusalWorkflowStatus'), TYPE)
				FOR XML PATH('RefusalWorkflowStatuses'),TYPE)

END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus_Get].[@Xml]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus].[Id]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus].[ChatId]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus].[ProcessStage]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus].[UserId]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus].[ProductId]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus].[CreateOn]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus].[ModifiedOn]" />
				</Entry>
				<Entry>
					<References Name="[bot].[RefusalWorkflowStatus_Get].[@ChatId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[RefusalWorkflowStatus_Get].[@ChatId]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[RefusalWorkflowStatus_Get].[@Xml]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlXmlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[xml]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[bot]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="564" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [bot].[RefusalWorkflowStatus_Get]&#xD;&#xA;&#x9;&#x9;&#x9;  @ChatId bigint&#xD;&#xA;&#x9;&#x9;    , @Xml XML output&#xD;&#xA;AS" />
			</Annotation>
		</Element>
		<Element Type="SqlTable" Name="[bot].[Store]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[Store].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[Store].[StoreId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[Store].[Name]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="255" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[Store].[Address]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="255" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[Store].[CreatedOn]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[Store].[ModifiedOn]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[bot]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="8" />
		</Element>
		<Element Type="SqlTable" Name="[bot].[User]">
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="Columns">
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[User].[Id]">
						<Property Name="IsNullable" Value="False" />
						<Property Name="IsIdentity" Value="True" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[User].[UserName]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="255" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[User].[EmployeeId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bigint]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[User].[AccessCode]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[User].[PhoneNumber]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[User].[StoreId]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[int]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[User].[Status]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[bit]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[User].[CreatedOn]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[User].[ModifiedOn]">
						<Property Name="IsNullable" Value="False" />
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSimpleColumn" Name="[bot].[User].[LastLoginOn]">
						<Relationship Name="TypeSpecifier">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[datetime]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[bot]" />
				</Entry>
			</Relationship>
			<AttachedAnnotation Disambiguator="9" />
		</Element>
		<Element Type="SqlProcedure" Name="[bot].[User_Login]">
			<Property Name="BodyScript">
				<Value><![CDATA[
BEGIN
	SET NOCOUNT ON;
	DECLARE @ID INT

	SELECT @ID = usr.[Id]
	  FROM bot.[User] as usr
	WHERE usr.[AccessCode] = @AccessCode and usr.[Status] = 1
	 
	IF(@ID IS NULL)
	BEGIN
		RETURN -1
	END

    UPDATE bot.[User]
		SET LastLoginOn = GETDATE()
	WHERE Id = @ID

	SET @Xml = (SELECT (SELECT	   usr.[Id]
								  ,usr.[UserName]
								  ,usr.[EmployeeId]
								  ,usr.[AccessCode]
								  ,usr.[PhoneNumber]
								  ,usr.[StoreId]
								  ,usr.[Status]
								  ,usr.[CreatedOn]
								  ,usr.[ModifiedOn]
								  ,usr.[LastLoginOn]
								  ,(SELECT	 
									   store.[Id]
									  ,store.[StoreId]
									  ,store.[Name]
									  ,store.[Address]
									  ,store.[CreatedOn]
									  ,store.[ModifiedOn]
									FROM bot.[Store] AS store
									WHERE store.[Id] = usr.[StoreId]
									FOR XML RAW('Store'), TYPE) 
						FROM bot.[User] AS usr
						WHERE usr.[Id]=@ID
						FOR XML RAW('User'), TYPE)
				FOR XML PATH('Users'),TYPE)

END]]></Value>
			</Property>
			<Property Name="IsAnsiNullsOn" Value="True" />
			<Relationship Name="BodyDependencies">
				<Entry>
					<References ExternalSource="BuiltIns" Name="[int]" />
				</Entry>
				<Entry>
					<References Name="[bot].[User]" />
				</Entry>
				<Entry>
					<References Name="[bot].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[bot].[User].[AccessCode]" />
				</Entry>
				<Entry>
					<References Name="[bot].[User_Login].[@AccessCode]" />
				</Entry>
				<Entry>
					<References Name="[bot].[User].[Status]" />
				</Entry>
				<Entry>
					<References Name="[bot].[User].[LastLoginOn]" />
				</Entry>
				<Entry>
					<References Name="[bot].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[bot].[User_Login].[@Xml]" />
				</Entry>
				<Entry>
					<References Name="[bot].[User].[Id]" />
				</Entry>
				<Entry>
					<References Name="[bot].[User].[UserName]" />
				</Entry>
				<Entry>
					<References Name="[bot].[User].[EmployeeId]" />
				</Entry>
				<Entry>
					<References Name="[bot].[User].[AccessCode]" />
				</Entry>
				<Entry>
					<References Name="[bot].[User].[PhoneNumber]" />
				</Entry>
				<Entry>
					<References Name="[bot].[User].[StoreId]" />
				</Entry>
				<Entry>
					<References Name="[bot].[User].[Status]" />
				</Entry>
				<Entry>
					<References Name="[bot].[User].[CreatedOn]" />
				</Entry>
				<Entry>
					<References Name="[bot].[User].[ModifiedOn]" />
				</Entry>
				<Entry>
					<References Name="[bot].[User].[LastLoginOn]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Store]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Store].[Id]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Store].[StoreId]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Store].[Name]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Store].[Address]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Store].[CreatedOn]" />
				</Entry>
				<Entry>
					<References Name="[bot].[Store].[ModifiedOn]" />
				</Entry>
				<Entry>
					<References Name="[bot].[User].[StoreId]" />
				</Entry>
			</Relationship>
			<Relationship Name="Parameters">
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[User_Login].[@AccessCode]">
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlTypeSpecifier">
									<Property Name="Length" Value="50" />
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[nvarchar]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
				<Entry>
					<Element Type="SqlSubroutineParameter" Name="[bot].[User_Login].[@Xml]">
						<Property Name="IsOutput" Value="True" />
						<Relationship Name="Type">
							<Entry>
								<Element Type="SqlXmlTypeSpecifier">
									<Relationship Name="Type">
										<Entry>
											<References ExternalSource="BuiltIns" Name="[xml]" />
										</Entry>
									</Relationship>
								</Element>
							</Entry>
						</Relationship>
					</Element>
				</Entry>
			</Relationship>
			<Relationship Name="Schema">
				<Entry>
					<References Name="[bot]" />
				</Entry>
			</Relationship>
			<Annotation Type="SysCommentsObjectAnnotation">
				<Property Name="Length" Value="1112" />
				<Property Name="StartLine" Value="1" />
				<Property Name="StartColumn" Value="1" />
				<Property Name="HeaderContents" Value="CREATE PROCEDURE [bot].[User_Login]&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;@AccessCode&#x9;    NVARCHAR(50)&#xD;&#xA;&#x9;&#x9;&#x9;  , @Xml XML output&#xD;&#xA;AS" />
			</Annotation>
		</Element>
	</Model>
</DataSchemaModel>